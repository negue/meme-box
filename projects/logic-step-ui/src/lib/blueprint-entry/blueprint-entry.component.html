<ng-container *ngIf="entry?.entryType === 'step' && entry | getEntryStepMetaData$: parent | async as stepMetadata">

  {{ stepMetadata.label }}


  <ng-container *ngIf="editMode">
  <mat-checkbox [checked]="entry.awaited"
                (change)="changeAwaited(entry, $event)">Wait?</mat-checkbox>

  <button mat-button
          (click)="editStepConfig(entry, parent)">Edit</button>

   <button mat-button
           (click)="removeStep(entry, parent)">Remove</button>
  </ng-container>
</ng-container>


<div cdkDropList class="entry-list"
     *ngFor="let subStepInfo of entry | getEntrySubStepInfo$ | async"
     (cdkDropListDropped)="stepRearranged($event, subStepInfo)">

  <span>{{subStepInfo.label}}</span>
  <div *ngFor="let subStep of context.getSubEntries$(entry.id, subStepInfo.label) | async"
       [cdkDragDisabled]="!editMode"
       cdkDrag [cdkDragData]="subStep"
       class="step-entry">
    <mat-icon svgIcon="drag_indicator" class="step-grab"
              *ngIf="editMode"
              cdkDragHandle></mat-icon>

    <app-blueprint-entry [entry]="subStep"
                         [parent]="entry"
                         [editMode]="editMode">
    </app-blueprint-entry>
</div>

   <button mat-button  *ngIf="editMode"
           (click)="addStep(entry, subStepInfo)">
     Add
   </button>
</div>


